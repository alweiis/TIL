# 스프링 프레임워크와 스프링 부트

## 스프링 프레임워크(Spring Framework)

- 자바(Java) 기반의 애플리케이션 프레임워크로 엔터프라이즈 애플리케이션을 개발하기 위한 다양한 기능을 제공한다.

##  스프링의 특징

### 1. 제어의 역전(IoC; Inversion of Control)

- IoC를 적용한 환경에서는 사용할 객체를 직접 생성하지 않고 객체의 생명주기 관리를 '외부'에 위임한다.
- 여기서 '외부'는 스프링 컨테이너 또는 IoC 컨테이너를 의미한다.
- **객체의 관리를 컨테이너에게 맡겨 제어권이 넘어간 것**을 `제어의 역전`이라고 부르고, 제어 역전을 통해 의존성 주입(DI), 관점 지향 프로그래밍(AOP) 등이 가능해진다.
- 스프링을 사용하면 객체의 제어권을 컨테이너로 넘기기 때문에 개발자는 비즈니스 로직을 작성하는 것에 더 집중할 수 있다.

### 2. 의존성 주입(DI; Dependency Injection)

- 의존성 주입이란 제어 역전의 방법 중 하나로, 사용할 객체를 직접 생성하지 않고 외부 컨테이너가 생성한 객체를 주입받아 사용하는 방식을 의미한다.

- 스프링에서 의존성을 주입받는 방법은 다음 세 가지가 있다.

  - **생성자**를 통한 의존성 주입

    - ```java
      @RestController
      public class DiController {
          MyService myService;
          
          @Autowired
          public DiController(MyService myService) {
              this.myService = myService;
          }
      }
      ```

  - **필드 객체 선언**을 통한 의존성 주입

    - ```java
      @RestController
      public class DiController {
          @Autowired
          private MyService myService;
      }
      ```

  - **setter 매서드**를 통한 의존성 주입

    - ```java
      @RestController
      public class DiController {
          MyService myService;
          
          @Autowired
          public void setMyService(MyService myService) {
              this.myService = myService;
          }
      }
      ```

- 스프링에서는 `@Autowired`라는 어노테이션을 통해 의존성을 주입할 수 있다. 

  - 스프링 4.3 이후 버전은 생성자를 통해 의존성을 주입할 때 `@Autowired` 어노테이션을 생략할 수도 있다.

- 스프링 공식 문서에서 **권장하는 의존성 주입 방법**은 **생정자를 통해 의존성을 주입받는 방식**이다.

  - 다른 방식과 다르게 생성자를 통해 의존성을 주입받는 방식은 레퍼런스 객체 없이 객체를 초기화할 수 없게 설계할 수 있기 때문이다.

### 3. 관점 지향 프로그래밍(AOP; Aspect-Oriented Programming)

- AOP는 관점을 기준으로 묶어 개발하는 방식을 의미한다. 
  - 관점(Aspect)이란 어떤 기능을 구현할 때 그 기능을 '핵심 기능'과 '부가 기능'으로 구분해 각각을 하나의 관점으로 보는 것을 의미한다.
  - 핵심 기능은 비즈니스 로직을 구현하는 과정에서 비즈니스 로직이 처리하려는 목적 기능을 말한다.
  - 부가 기능은 핵심 비즈니스 로직 사이에 로깅 처리를 하거나 트랜잭션을 처리하는 코드를 예로 들 수 있다.
- AOP의 관점에서 부가 기능은 핵심 기능이 어떤 기능인지에 무관하게 로직이 수행되기 전 또는 후에 수행되기만 하면 된다.
- 이처럼 여러 비즈니스 로직에서 반복되는 부가 기능을 하나의 공통 로직으로 처리하도록 모듈화해 삽입하는 방식을 AOP라고 한다.
- AOP를 구현하는 방법은 크게 다음 세 가지가 있다.
  - 컴파일 과정에 삽입하는 방식
  - 바이트코드를 메모리에 로드하는 과정에 삽입하는 방식
  - 프락시 패턴을 이용한 방식
- 이 방법들 중 스프링은 디자인 패턴 중 하나인 프락시 패턴을 통해 AOP 기능을 제공하고 있다.
- 스프링 AOP의 목적은 OOP와 마찬가지로 모듈화해서 재사용 가능한 구성을 만드는 것이고, 모듈화된 객체를 편하게 적용할 수 있게 해서 개발자가 비즈니스 로직을 구현하는 것만 집중할 수 있게 도와주는 것이다.

## 스프링 프레임워크 vs 스프링 부트

- 스프링 프레임워크는 기존 개발 방식의 문제와 한계를 극복하기 위해 다양한 기능을 제공하지만, 기능이 많은 만큼 설정이 복잡하다.
- **스프링 부트**는 스프링 프레임워크를 사용할 때의 설정이 복잡해지는 문제를 해결하기 위해 등장했고, **별도의 복잡한 설정없이도** 스프링 기반 애플리케이션을 손쉽게 만들 수 있도록 도와준다.

## 스프링 부트의 특징

### 1. 의존성 관리

- 스프링 프레임워크에서는 개발에 필요한 각 모듈의 의존성을 직접 설정해야 했고, 또 호환되는 버전을 명시해야 정상 동작했다.
- 그래서 애플리케이션에서 사용하는 라이브러리의 버전을 올리는 상황에서 기존에 사용하던 다른 라이브러리의 버전까지도 고려해야 했다.
- 하지만 스프링 부트에서는 이 같은 불편함을 해소하기 위해 `sping-boot-starter`라는 의존성을 제공한다.
- `spring-boot-starter`의 의존성은 여러 종류가 있고, 각 라이브러리의 기능과 관련해서 자주 사용되고 서로 호환되는 버전의 모듈 조합을 제공하기 때문에 라이브러리 호환 문제를 해결할 수 있다.

### 2. 자동 설정

- 스프링 부트는 스프링 프레임워크의 기능을 사용하기 위한 자동 설정(Auto Configuraion)을 지원한다.
- 자동 설정은 애플리케이션에 추가된 라이브러리를 실행하는 데 필요한 환경 설정을 자동으로 찾아준다.
- 즉, 애플리케이션을 개발하는 데 필요한 의존성을 추가하면 프레임워크가 이를 자동으로 관리해준다.

### 3. 내장 WAS

- 스프링 부트의 각 웹 애플리케이션에는 내장 WAS(Web Application Server)가 존재한다.

- 웹 애플리케이션을 개발할 때 가장 기본이 되는 의존성인 `spring-boot-starter-web`의 경우 아래의 이미지와 같이 톰캣을 내장하고 있다.

  <p align="center">
    <img src ="https://user-images.githubusercontent.com/52318666/181162689-c84b4b3c-c54b-4819-a19b-c10b9c078259.png" >
  </p>

- 스프링 부트의 자동 설정 기능은 톰캣에도 적용이되므로 특별한 설정 없이도 톰캣을 실행할 수 있고, 필요에 따라 다른 웹 서버(Jetty 등)로 대체할 수 있다.

### 4. 모니터링

- 개발이 끝나고 서비스를 운영하는 시기에는 해당 시스템이 사용하는 스레드, 메모리, 세션 등의 주요 요소들을 모니터링해야 한다.
- 스프링 부트에서는 스프링 부트 액추에이터(Spring Boot Actuator)라는 자체 모니터링 도구가 있다.

### 🔖  용어 정리 

- '엔터프라이즈급 개발'이란?
  - 기업 환경을 대상으로 하는 개발을 말한다. 네이버나 카카오톡 같은 대규모 데이터를 처리하는 환경을 엔터프라이즈 환경이라고 부른다.
  - 스프링은 이 환경에 알맞게 설계되어 있기 때문에 개발자가 애플리케이션을 개발할 때 많은 요소를 프레임워크에 위임하고 비즈니스 로직의 구현에 집중할 수 있게 해준다.

### :memo:참고 문헌

- 스프링 부트 핵심 가이드(위키북스, 장정우 지음)

