# 데이터 생성, 조작과 변환



### 문자열 데이터 처리

- char : 지정한 크기보다 문자열이 작으면 나머지 공간을 공백으로 채워주는 고정 길이 문자열 자료형으로, MySQL은 CHAR를 최대 255자 까지 허용한다.
- varchar : 가변 길이 문자열 자료형으로 MySQL은 varchar 열에 최대 65535자 까지 허용한다.
- text : 매우 큰 가변 길이 문자열로, MySQL에는 최대 4기가바이트 크기의 문서를 저장할 수 있는 다양한 텍스트 자료형(tinytext, text, mediumtext, longtext)을 있다.



### 문자열 조작

- length() : 문자열의 개수를 반환한다.

- position() : 문자열에서 부분 문자열의 위치를 반환한다.

- locate() : 검색하려는 문자열이 대상 문자열의 첫 번째 문자가 아닌 특정 위치의 문자부터 검색할때 사용한다.

- concat() : 둘 이상의 문자열을 입력한 순서대로 연결해서 반환한다.

- substring() : 문자열의 지정된 위치에서부터 시작해서 지정된 개수의 문자를 추출하여 반환한다.

  

  > - MySQL 서버는 데이터를 조회할 때 char 데이터에서 공백을 제거한다.
  > - C 또는 C++와 같은 언어로 작성된 프로그램에서 배열의 첫 번째 요소의 위치는 0이지만, 데이터베이스로 작업할 때는 문자열의 첫 번째 위치는 1이다.



### 숫자 데이터 처리

- mod() : 첫 번째 인수를 두 번째 인수로 나누었을 때 나머지를 계산하여 반환한다.

- pow() : 첫 번째 인수를 두 번째 인수만큼 거듭 제곱을 계산한 결과를 반환한다.

- ceil() : 인수를 올림한 결과를 반환한다.

- floor() : 인수를 내림한 결과를 반환한다.

- round() : 인수의 소수 부분의 숫자가 두 정수 사이의 중간 또는 그 이상일 때는 반올림하고, 두 정수의 중간보다 작으면 내림한 결과를 반환한다. 추가적으로 두 번째 인수에서 반올림할 소수점 이하 자릿수를 지정할 수 있다.

- truncate() : round() 함수와 마찬가지로 truncate() 함수도 두 번째 인수를 이용해서 소수점 오른쪽 자릿루를 허용하지만, truncate() 함수는 반올림이 아닌 내림한 결과를 반환한다.

- sign() : 인수가 음수이면 -1을, 0이면 0을, 양수이면 1을 반환한다.

- abs() : 인수의 절댓값을 반환한다.

  

### 시간 데이터 처리

- 날짜 형식의 구성요소

  | 요소 | 정의            | 범위                   |
  | ---- | --------------- | ---------------------- |
  | YYYY | 연도, 세기 포함 | 1000부터 9999          |
  | MM   | 월              | 01(1월) 부터 12 (12월) |
  | DD   | 일              | 01부터 31              |
  | HH   | 시간            | 00부터 23              |
  | HHH  | 시간(경과)      | -838부터 838           |
  | MI   | 분              | 00부터 59              |
  | SS   | 초              | 00부터 59              |

- 필수 날짜 구성요소

  | 자료형    | 기본 형식           |
  | --------- | ------------------- |
  | date      | YYYY-MM-DD          |
  | datetime  | YYYY-MM-DD HH:MI:SS |
  | timestamp | YYYY-MM-DD HH:MI:SS |
  | time      | HHH:MI:SS           |

- current_date() : 현재 날짜를 문자열로 반환한다.
- current_time() : 현재 시간을 문자열로 반환한다.
- current_timestamp() : 현재 날짜 및 시간을 문자열로 반환한다.



### 시간 데이터 조작

* 날짜를 반환하는 시간 함수
  - date_add(expr1, interval expr2) : 첫 번째 인수(기준 날짜)를 기준으로 입력된 기간(두 번째 인수)만큼 더한 날짜를 반환한다.
  - date_sub(expr1, interval expr2) : 첫 번째 인수(기준 날짜)를 기준으로 입력된 기간(두 번째 인수)만큼 뺀 날짜를 반환한다.
  - last_day() : 인수(기준 날짜)를 기준으로 해당 월의 마지막 날을 찾아 반환한다.

```mysql
mysql> SELECT CURRENT_DATE();
+----------------+
| CURRENT_DATE() |
+----------------+
| 2022-03-17     |
+----------------+
# 현재 날짜는 2022년 3월 17일이다. 현재 날짜에 5일을 더하는 방법은 다음과 같다.

mysql> SELECT DATE_ADD(CURRENT_DATE(), INTERVAL 5 day);
+------------------------------------------+
| DATE_ADD(CURRENT_DATE(), INTERVAL 5 day) |
+------------------------------------------+
| 2022-03-22                               |
+------------------------------------------+
# 첫 번째 인수는 기준 날짜이고, 두 번째 인수는 키워드(interval), 원하는 수량 및 기간 자료형으로 구성된다.
```

- 일반적인 기간 자료형

  | 기간명        | 정의                      |
  | ------------- | ------------------------- |
  | second        | 초                        |
  | minute        | 분                        |
  | hour          | 시간                      |
  | day           | 일 수                     |
  | month         | 개월 수                   |
  | year          | 년 수                     |
  | minute_second | ':'으로 구분된 분 초      |
  | hour_second   | ':'으로 구분된 시, 분, 초 |
  | year_month    | '-'으로 구분된 년, 월     |

- 문자열을 반환하는 시간 함수
  - dayname() : 인수(기준 날짜)에 해당하는 요일을 반환한다.

```mysql
mysql> SELECT DAYNAME('2022-03-20');
+-----------------------+
| DAYNAME('2022-03-20') |
+-----------------------+
| Sunday                |
+-----------------------+
```



- 숫자를 반환하는 시간 함수
  - datediff() : 첫 번째 인수와 두 번째 인수 사이의 기간을 계산하여 반환한다. 이때 두 번째 인수보다 첫 번째 인수에 이전 날짜를 지정하면 음수를 반환한다.

```mysql
mysql> SELECT DATEDIFF('2022-03-20', '2022-03-17');
+--------------------------------------+
| DATEDIFF('2022-03-20', '2022-03-17') |
+--------------------------------------+
|                                    3 |
+--------------------------------------+

mysql> SELECT DATEDIFF('2022-03-17', '2022-03-20');
+--------------------------------------+
| DATEDIFF('2022-03-17', '2022-03-20') |
+--------------------------------------+
|                                   -3 |
+--------------------------------------+
```



### 변환 함수

- cast(expr AS type) :  cast() 함수는 인수로 전달받은 값을 명시된 타입으로 변환하여 반환한다. 이때 변환하고자 하는 타입을 AS 절을 이용하여 직접 명시할 수 있습니다.

```mysql
mysql> SELECT CAST('100' AS SIGNED INTEGER);
+-------------------------------+
| CAST('100' AS SIGNED INTEGER) |
+-------------------------------+
|                           100 |
+-------------------------------+
```

